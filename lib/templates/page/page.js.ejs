import { getExample } from "../../services/api.js";
import Prompt from "../../utils/Prompt.js";
<% if (data.isList) { %>import Paging from "../../utils/Paging.js";<% } -%>
<% if (data.isForm) { %>import FormValidator from "../../utils/FormValidator.js";<% } -%>

const App = getApp();
<% if (data.isList) { -%>
let PagingInstance;
let listComponent;
<% } -%>

Page({
  data: {
    <% if (data.isList) { -%>
    canLoadMore: true,
    list: [],
    <% } -%>    
    <% if (data.isForm) { -%>
    formData:{
        // define fields
    },    
    formRules:[
        // define rules for fields in formData
    ],
    <% } -%>
  },

  async onLoad(options) {
    
  },

  async onShow(){
    listComponent = this.selectComponent("#list")
    PagingInstance = new Paging({
        context: this,
        pagingName:'资讯分页', 
        requestApi:'getArticle',
        size:20,
        params:{
          groupId: 1
        }
    })
    await PagingInstance.init()
    listComponent.setDividerText()
  },

  async onPullDownRefresh() {
    wx.stopPullDownRefresh()
    await PagingInstance.init()
    listComponent.setDividerText()
},
  async onReachBottom() {
    await PagingInstance.get()
    listComponent.setDividerText()
  },

});